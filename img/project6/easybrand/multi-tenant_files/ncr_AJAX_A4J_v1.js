// NOTE: If this file needs to be edited, you can put this JavaScript through an online
// JavaScript formatter to make the code legible. This code is compressed in order to save
// client bandwidth usage and improve performance. 

/*
 * Prolog for created Ajax4Jsf library
 */
if (!window.A4J) { window.A4J= {};}

//if(window.A4J.AJAX && window.A4J.AJAX.XMLHttpRequest) return;
/*
 * ====================================================================
 * About Sarissa: http://dev.abiss.gr/sarissa
 * ====================================================================
 * Sarissa is an ECMAScript library acting as a cross-browser wrapper for native XML APIs.
 * The library supports Gecko based browsers like Mozilla and Firefox,
 * Internet Explorer (5.5+ with MSXML3.0+), Konqueror, Safari and Opera
 * @version 0.9.9.6
 * @author: Copyright 2004-2008 Emmanouil Batsis, mailto: mbatsis at users full stop sourceforge full stop net
 * ====================================================================
 * Licence
 * ====================================================================
 * Sarissa is free software distributed under the GNU GPL version 2 (see <a href="gpl.txt">gpl.txt</a>) or higher, 
 * GNU LGPL version 2.1 (see <a href="lgpl.txt">lgpl.txt</a>) or higher and Apache Software License 2.0 or higher 
 * (see <a href="asl.txt">asl.txt</a>). This means you can choose one of the three and use that if you like. If 
 * you make modifications under the ASL, i would appreciate it if you submitted those.
 * In case your copy of Sarissa does not include the license texts, you may find
 * them online in various formats at <a href="http://www.gnu.org">http://www.gnu.org</a> and 
 * <a href="http://www.apache.org">http://www.apache.org</a>.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY 
 * KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE 
 * WARRANTIES OF MERCHANTABILITY,FITNESS FOR A PARTICULAR PURPOSE 
 * AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR 
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR 
 * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * NOTE: This distribution of Sarissa has been modified in order to handle IE10 correctly.
 */
/**
 * <p>Sarissa is a utility class. Provides "static" methods for DOMDocument, 
 * DOM Node serialization to XML strings and other utility goodies.</p>
 * @constructor
 * @static
 */
function Sarissa(){}
Sarissa.VERSION="0.9.9.6";Sarissa.PARSED_OK="Document contains no parsing errors";Sarissa.PARSED_EMPTY="Document is empty";Sarissa.PARSED_UNKNOWN_ERROR="Not well-formed or other error";Sarissa.IS_ENABLED_TRANSFORM_NODE=false;Sarissa.REMOTE_CALL_FLAG="gr.abiss.sarissa.REMOTE_CALL_FLAG";Sarissa._lastUniqueSuffix=0;Sarissa._getUniqueSuffix=function(){return Sarissa._lastUniqueSuffix++;};Sarissa._SARISSA_IEPREFIX4XSLPARAM="";Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION=document.implementation&&true;Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT=Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION&&document.implementation.createDocument;Sarissa._SARISSA_HAS_DOM_FEATURE=Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION&&document.implementation.hasFeature;Sarissa._SARISSA_IS_MOZ=Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT&&Sarissa._SARISSA_HAS_DOM_FEATURE;Sarissa._SARISSA_IS_SAFARI=navigator.userAgent.toLowerCase().indexOf("safari")!=-1||navigator.userAgent.toLowerCase().indexOf("konqueror")!=-1;Sarissa._SARISSA_IS_SAFARI_OLD=Sarissa._SARISSA_IS_SAFARI&&(parseInt((navigator.userAgent.match(/AppleWebKit\/(\d+)/)||{})[1],10)<420);Sarissa._SARISSA_IS_IE=document.all&&window.ActiveXObject&&navigator.userAgent.toLowerCase().indexOf("msie")>-1&&navigator.userAgent.toLowerCase().indexOf("opera")==-1;Sarissa._SARISSA_IS_IE9=Sarissa._SARISSA_IS_IE&&navigator.userAgent.toLowerCase().indexOf("msie 9")>-1;Sarissa._SARISSA_IS_IE10 = Sarissa._SARISSA_IS_IE && navigator.userAgent.toLowerCase().indexOf("msie 10") > -1;Sarissa._SARISSA_IS_OPERA=navigator.userAgent.toLowerCase().indexOf("opera")!=-1;if(!window.Node||!Node.ELEMENT_NODE){Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};}
if(Sarissa._SARISSA_IS_SAFARI_OLD){HTMLHtmlElement=document.createElement("html").constructor;Node=HTMLElement={};HTMLElement.prototype=HTMLHtmlElement.__proto__.__proto__;HTMLDocument=Document=document.constructor;var x=new DOMParser();XMLDocument=x.constructor;Element=x.parseFromString("<Single />","text/xml").documentElement.constructor;x=null;}
if(typeof XMLDocument=="undefined"&&typeof Document!="undefined"){XMLDocument=Document;}
if(Sarissa._SARISSA_IS_IE){Sarissa._SARISSA_IEPREFIX4XSLPARAM="xsl:";var _SARISSA_DOM_PROGID="";var _SARISSA_XMLHTTP_PROGID="";var _SARISSA_DOM_XMLWRITER="";Sarissa.pickRecentProgID=function(idList){var bFound=false,e;var o2Store;for(var i=0;i<idList.length&&!bFound;i++){try{var oDoc=new ActiveXObject(idList[i]);o2Store=idList[i];bFound=true;}catch(objException){e=objException;}}
if(!bFound){throw"Could not retrieve a valid progID of Class: "+idList[idList.length-1]+". (original exception: "+e+")";}
idList=null;return o2Store;};_SARISSA_DOM_PROGID=null;_SARISSA_THREADEDDOM_PROGID=null;_SARISSA_XSLTEMPLATE_PROGID=null;_SARISSA_XMLHTTP_PROGID=null;XMLHttpRequest=function(){if(!_SARISSA_XMLHTTP_PROGID){_SARISSA_XMLHTTP_PROGID=Sarissa.pickRecentProgID(["Msxml2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]);}
return new ActiveXObject(_SARISSA_XMLHTTP_PROGID);};Sarissa.getDomDocument=function(sUri,sName){if(!_SARISSA_DOM_PROGID){try{_SARISSA_DOM_PROGID=Sarissa.pickRecentProgID(["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"]);}catch(e){_SARISSA_DOM_PROGID="noActiveX";}}
var oDoc=_SARISSA_DOM_PROGID=="noActiveX"?document.createElement("xml"):new ActiveXObject(_SARISSA_DOM_PROGID);try{oDoc.validateOnParse=false;oDoc.resolveExternals="false";oDoc.setProperty("ProhibitDTD",false);}catch(e){}
if(sName){var prefix="";if(sUri){if(sName.indexOf(":")>1){prefix=sName.substring(0,sName.indexOf(":"));sName=sName.substring(sName.indexOf(":")+1);}else{prefix="a"+Sarissa._getUniqueSuffix();}}
if(sUri){oDoc.loadXML('<'+prefix+':'+sName+" xmlns:"+prefix+"=\""+sUri+"\""+" />");}else{oDoc.loadXML('<'+sName+" />");}}
return oDoc;};Sarissa.getParseErrorText=function(oDoc){var parseErrorText=Sarissa.PARSED_OK;if(oDoc&&oDoc.parseError&&oDoc.parseError.errorCode&&oDoc.parseError.errorCode!=0){parseErrorText="XML Parsing Error: "+oDoc.parseError.reason+"\nLocation: "+oDoc.parseError.url+"\nLine Number "+oDoc.parseError.line+", Column "+
oDoc.parseError.linepos+":\n"+oDoc.parseError.srcText+"\n";for(var i=0;i<oDoc.parseError.linepos;i++){parseErrorText+="-";}
parseErrorText+="^\n";}
else if(oDoc.documentElement===null){parseErrorText=Sarissa.PARSED_EMPTY;}
return parseErrorText;};Sarissa.setXpathNamespaces=function(oDoc,sNsSet){oDoc.setProperty("SelectionLanguage","XPath");oDoc.setProperty("SelectionNamespaces",sNsSet);};XSLTProcessor=function(){if(!_SARISSA_XSLTEMPLATE_PROGID){_SARISSA_XSLTEMPLATE_PROGID=Sarissa.pickRecentProgID(["Msxml2.XSLTemplate.6.0","MSXML2.XSLTemplate.3.0"]);}
this.template=new ActiveXObject(_SARISSA_XSLTEMPLATE_PROGID);this.processor=null;};XSLTProcessor.prototype.importStylesheet=function(xslDoc){if(!_SARISSA_THREADEDDOM_PROGID){_SARISSA_THREADEDDOM_PROGID=Sarissa.pickRecentProgID(["MSXML2.FreeThreadedDOMDocument.6.0","MSXML2.FreeThreadedDOMDocument.3.0"]);}
xslDoc.setProperty("SelectionLanguage","XPath");xslDoc.setProperty("SelectionNamespaces","xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");var converted=new ActiveXObject(_SARISSA_THREADEDDOM_PROGID);try{converted.resolveExternals=true;converted.setProperty("AllowDocumentFunction",true);converted.setProperty("AllowXsltScript",true);}
catch(e){}
if(xslDoc.url&&xslDoc.selectSingleNode("//xsl:*[local-name() = 'import' or local-name() = 'include']")!=null){converted.async=false;converted.load(xslDoc.url);}
else{converted.loadXML(xslDoc.xml);}
converted.setProperty("SelectionNamespaces","xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");var output=converted.selectSingleNode("//xsl:output");if(output){this.outputMethod=output.getAttribute("method");}
else{delete this.outputMethod;}
this.template.stylesheet=converted;this.processor=this.template.createProcessor();this.paramsSet=[];};XSLTProcessor.prototype.transformToDocument=function(sourceDoc){var outDoc;if(_SARISSA_THREADEDDOM_PROGID){this.processor.input=sourceDoc;outDoc=new ActiveXObject(_SARISSA_DOM_PROGID);this.processor.output=outDoc;this.processor.transform();return outDoc;}
else{if(!_SARISSA_DOM_XMLWRITER){_SARISSA_DOM_XMLWRITER=Sarissa.pickRecentProgID(["Msxml2.MXXMLWriter.6.0","Msxml2.MXXMLWriter.3.0","MSXML2.MXXMLWriter","MSXML.MXXMLWriter","Microsoft.XMLDOM"]);}
this.processor.input=sourceDoc;outDoc=new ActiveXObject(_SARISSA_DOM_XMLWRITER);this.processor.output=outDoc;this.processor.transform();var oDoc=new ActiveXObject(_SARISSA_DOM_PROGID);oDoc.loadXML(outDoc.output+"");return oDoc;}};XSLTProcessor.prototype.transformToFragment=function(sourceDoc,ownerDoc){this.processor.input=sourceDoc;this.processor.transform();var s=this.processor.output;var f=ownerDoc.createDocumentFragment();var container;if(this.outputMethod=='text'){f.appendChild(ownerDoc.createTextNode(s));}else if(ownerDoc.body&&ownerDoc.body.innerHTML){container=ownerDoc.createElement('div');container.innerHTML=s;while(container.hasChildNodes()){f.appendChild(container.firstChild);}}
else{var oDoc=new ActiveXObject(_SARISSA_DOM_PROGID);if(s.substring(0,5)=='<?xml'){s=s.substring(s.indexOf('?>')+2);}
var xml=''.concat('<my>',s,'</my>');oDoc.loadXML(xml);container=oDoc.documentElement;while(container.hasChildNodes()){f.appendChild(container.firstChild);}}
return f;};XSLTProcessor.prototype.setParameter=function(nsURI,name,value){value=value?value:"";if(nsURI){this.processor.addParameter(name,value,nsURI);}else{this.processor.addParameter(name,value);}
nsURI=""+(nsURI||"");if(!this.paramsSet[nsURI]){this.paramsSet[nsURI]=[];}
this.paramsSet[nsURI][name]=value;};XSLTProcessor.prototype.getParameter=function(nsURI,name){nsURI=""+(nsURI||"");if(this.paramsSet[nsURI]&&this.paramsSet[nsURI][name]){return this.paramsSet[nsURI][name];}else{return null;}};XSLTProcessor.prototype.clearParameters=function(){for(var nsURI in this.paramsSet){for(var name in this.paramsSet[nsURI]){if(nsURI!=""){this.processor.addParameter(name,"",nsURI);}else{this.processor.addParameter(name,"");}}}
this.paramsSet=[];};}else{if(Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT){Sarissa.__handleLoad__=function(oDoc){Sarissa.__setReadyState__(oDoc,4);};_sarissa_XMLDocument_onload=function(){Sarissa.__handleLoad__(this);};Sarissa.__setReadyState__=function(oDoc,iReadyState){oDoc.readyState=iReadyState;oDoc.readystate=iReadyState;if(oDoc.onreadystatechange!=null&&typeof oDoc.onreadystatechange=="function"){oDoc.onreadystatechange();}};Sarissa.getDomDocument=function(sUri,sName){var oDoc=document.implementation.createDocument(sUri?sUri:null,sName?sName:null,null);if(!oDoc.onreadystatechange){oDoc.onreadystatechange=null;}
if(!oDoc.readyState){oDoc.readyState=0;}
oDoc.addEventListener("load",_sarissa_XMLDocument_onload,false);return oDoc;};if(window.XMLDocument){}
else if(Sarissa._SARISSA_HAS_DOM_FEATURE&&window.Document&&!Document.prototype.load&&document.implementation.hasFeature('LS','3.0')){Sarissa.getDomDocument=function(sUri,sName){var oDoc=document.implementation.createDocument(sUri?sUri:null,sName?sName:null,null);return oDoc;};}
else{Sarissa.getDomDocument=function(sUri,sName){var oDoc=document.implementation.createDocument(sUri?sUri:null,sName?sName:null,null);if(oDoc&&(sUri||sName)&&!oDoc.documentElement){oDoc.appendChild(oDoc.createElementNS(sUri,sName));}
return oDoc;};}}}
if(!window.DOMParser||Sarissa._SARISSA_IS_IE9){if(Sarissa._SARISSA_IS_SAFARI){DOMParser=function(){};DOMParser.prototype.parseFromString=function(sXml,contentType){var xmlhttp=new XMLHttpRequest();xmlhttp.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(sXml),false);xmlhttp.send(null);return xmlhttp.responseXML;};}else if(Sarissa.getDomDocument&&Sarissa.getDomDocument()&&Sarissa.getDomDocument(null,"bar").xml){DOMParser=function(){};DOMParser.prototype.parseFromString=function(sXml,contentType){var doc=Sarissa.getDomDocument();try{doc.validateOnParse=false;doc.setProperty("ProhibitDTD",false);}catch(e){}
doc.loadXML(sXml);return doc;};}}
if((typeof(document.importNode)=="undefined")&&Sarissa._SARISSA_IS_IE){try{document.importNode=function(oNode,bChildren){var tmp;if(oNode.nodeName=='#text'){return document.createTextNode(oNode.data);}
else{if(oNode.nodeName=="tbody"||oNode.nodeName=="tr"){tmp=document.createElement("table");}
else if(oNode.nodeName=="td"){tmp=document.createElement("tr");}
else if(oNode.nodeName=="option"){tmp=document.createElement("select");}
else{tmp=document.createElement("div");}
if(bChildren){tmp.innerHTML=oNode.xml?oNode.xml:oNode.outerHTML;}else{tmp.innerHTML=oNode.xml?oNode.cloneNode(false).xml:oNode.cloneNode(false).outerHTML;}
return tmp.getElementsByTagName("*")[0];}};}catch(e){}}
if(!Sarissa.getParseErrorText){Sarissa.getParseErrorText=function(oDoc){var parseErrorText=Sarissa.PARSED_OK;if((!oDoc)||(!oDoc.documentElement)){parseErrorText=Sarissa.PARSED_EMPTY;}else if(oDoc.documentElement.tagName=="parsererror"){parseErrorText=oDoc.documentElement.firstChild.data;parseErrorText+="\n"+oDoc.documentElement.firstChild.nextSibling.firstChild.data;}else if(oDoc.getElementsByTagName("parsererror").length>0){var parsererror=oDoc.getElementsByTagName("parsererror")[0];parseErrorText=Sarissa.getText(parsererror,true)+"\n";}else if(oDoc.parseError&&oDoc.parseError.errorCode!=0){parseErrorText=Sarissa.PARSED_UNKNOWN_ERROR;}
return parseErrorText;};}
Sarissa.getText=function(oNode,deep){var s="";var nodes=oNode.childNodes;if(oNode.nodeType==Node.ATTRIBUTE_NODE&&nodes.length==0){return oNode.value;}
for(var i=0;i<nodes.length;i++){var node=nodes[i];var nodeType=node.nodeType;if(nodeType==Node.TEXT_NODE||nodeType==Node.CDATA_SECTION_NODE){s+=node.data;}else if(deep===true&&(nodeType==Node.ELEMENT_NODE||nodeType==Node.DOCUMENT_NODE||nodeType==Node.DOCUMENT_FRAGMENT_NODE)){s+=Sarissa.getText(node,true);}}
return s;};if(!window.XMLSerializer&&Sarissa.getDomDocument&&Sarissa.getDomDocument("","foo",null).xml){XMLSerializer=function(){};XMLSerializer.prototype.serializeToString=function(oNode){return oNode.xml;};}else if((Sarissa._SARISSA_IS_IE9||Sarissa._SARISSA_IS_IE10)&&window.XMLSerializer){IE9XMLSerializer=XMLSerializer;XMLSerializer=function(){this._oldSerializer=new IE9XMLSerializer()};XMLSerializer.prototype.serializeToString=function(oNode){if(typeof(oNode)=='object'&&'xml'in oNode){return oNode.xml;}else{return this._oldSerializer.serializeToString(oNode);}};}
Sarissa.stripTags=function(s){return s?s.replace(/<[^>]+>/g,""):s;};Sarissa.clearChildNodes=function(oNode){while(oNode.firstChild){oNode.removeChild(oNode.firstChild);}};Sarissa.copyChildNodes=function(nodeFrom,nodeTo,bPreserveExisting){if(Sarissa._SARISSA_IS_SAFARI&&nodeTo.nodeType==Node.DOCUMENT_NODE){nodeTo=nodeTo.documentElement;}
if((!nodeFrom)||(!nodeTo)){throw"Both source and destination nodes must be provided";}
if(!bPreserveExisting){Sarissa.clearChildNodes(nodeTo);}
var ownerDoc=nodeTo.nodeType==Node.DOCUMENT_NODE?nodeTo:nodeTo.ownerDocument;var nodes=nodeFrom.childNodes;var i;if(typeof(ownerDoc.importNode)!="undefined"){for(i=0;i<nodes.length;i++){nodeTo.appendChild(ownerDoc.importNode(nodes[i],true));}}else{for(i=0;i<nodes.length;i++){nodeTo.appendChild(nodes[i].cloneNode(true));}}};Sarissa.moveChildNodes=function(nodeFrom,nodeTo,bPreserveExisting){if((!nodeFrom)||(!nodeTo)){throw"Both source and destination nodes must be provided";}
if(!bPreserveExisting){Sarissa.clearChildNodes(nodeTo);}
var nodes=nodeFrom.childNodes;if(nodeFrom.ownerDocument==nodeTo.ownerDocument){while(nodeFrom.firstChild){nodeTo.appendChild(nodeFrom.firstChild);}}else{var ownerDoc=nodeTo.nodeType==Node.DOCUMENT_NODE?nodeTo:nodeTo.ownerDocument;var i;if(typeof(ownerDoc.importNode)!="undefined"){for(i=0;i<nodes.length;i++){nodeTo.appendChild(ownerDoc.importNode(nodes[i],true));}}else{for(i=0;i<nodes.length;i++){nodeTo.appendChild(nodes[i].cloneNode(true));}}
Sarissa.clearChildNodes(nodeFrom);}};Sarissa.xmlize=function(anyObject,objectName,indentSpace,skipEscape){indentSpace=indentSpace?indentSpace:'';var s=indentSpace+'<'+objectName+'>';var isLeaf=false;if(!(anyObject instanceof Object)||anyObject instanceof Number||anyObject instanceof String||anyObject instanceof Boolean||anyObject instanceof Date){s+=(skipEscape?Sarissa.escape(anyObject):anyObject);isLeaf=true;}else{s+="\n";var isArrayItem=anyObject instanceof Array;for(var name in anyObject){if(anyObject[name]instanceof Function){continue;}
s+=Sarissa.xmlize(anyObject[name],(isArrayItem?"array-item key=\""+name+"\"":name),indentSpace+" ");}
s+=indentSpace;}
return(s+=(objectName.indexOf(' ')!=-1?"</array-item>\n":"</"+objectName+">\n"));};Sarissa.escape=function(sXml){return sXml.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");};Sarissa.unescape=function(sXml){return sXml.replace(/&apos;/g,"'").replace(/&quot;/g,"\"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");};Sarissa.updateCursor=function(oTargetElement,sValue){if(oTargetElement&&oTargetElement.style&&oTargetElement.style.cursor!=undefined){oTargetElement.style.cursor=sValue;}};Sarissa.updateContentFromURI=function(sFromUrl,oTargetElement,xsltproc,callback,skipCache){try{Sarissa.updateCursor(oTargetElement,"wait");var xmlhttp=new XMLHttpRequest();xmlhttp.open("GET",sFromUrl,true);xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){try{var oDomDoc=xmlhttp.responseXML;if(oDomDoc&&Sarissa.getParseErrorText(oDomDoc)==Sarissa.PARSED_OK){Sarissa.updateContentFromNode(xmlhttp.responseXML,oTargetElement,xsltproc);if(callback){callback(sFromUrl,oTargetElement);}}
else{throw Sarissa.getParseErrorText(oDomDoc);}}
catch(e){if(callback){callback(sFromUrl,oTargetElement,e);}
else{throw e;}}}};if(skipCache){var oldage="Sat, 1 Jan 2000 00:00:00 GMT";xmlhttp.setRequestHeader("If-Modified-Since",oldage);}
xmlhttp.send("");}
catch(e){Sarissa.updateCursor(oTargetElement,"auto");if(callback){callback(sFromUrl,oTargetElement,e);}
else{throw e;}}};Sarissa.updateContentFromNode=function(oNode,oTargetElement,xsltproc){try{Sarissa.updateCursor(oTargetElement,"wait");Sarissa.clearChildNodes(oTargetElement);var ownerDoc=oNode.nodeType==Node.DOCUMENT_NODE?oNode:oNode.ownerDocument;if(ownerDoc.parseError&&ownerDoc.parseError.errorCode!=0){var pre=document.createElement("pre");pre.appendChild(document.createTextNode(Sarissa.getParseErrorText(ownerDoc)));oTargetElement.appendChild(pre);}
else{if(xsltproc){oNode=xsltproc.transformToDocument(oNode);}
if(oTargetElement.tagName.toLowerCase()=="textarea"||oTargetElement.tagName.toLowerCase()=="input"){oTargetElement.value=new XMLSerializer().serializeToString(oNode);}
else{try{oTargetElement.appendChild(oTargetElement.ownerDocument.importNode(oNode,true));}
catch(e){oTargetElement.innerHTML=new XMLSerializer().serializeToString(oNode);}}}}
catch(e){throw e;}
finally{Sarissa.updateCursor(oTargetElement,"auto");}};Sarissa.formToQueryString=function(oForm){var qs="";for(var i=0;i<oForm.elements.length;i++){var oField=oForm.elements[i];var sFieldName=oField.getAttribute("name")?oField.getAttribute("name"):oField.getAttribute("id");if(sFieldName&&((!oField.disabled)||oField.type=="hidden")){switch(oField.type){case"hidden":case"text":case"textarea":case"password":qs+=sFieldName+"="+encodeURIComponent(oField.value)+"&";break;case"select-one":qs+=sFieldName+"="+encodeURIComponent(oField.options[oField.selectedIndex].value)+"&";break;case"select-multiple":for(var j=0;j<oField.length;j++){var optElem=oField.options[j];if(optElem.selected===true){qs+=sFieldName+"[]"+"="+encodeURIComponent(optElem.value)+"&";}}
break;case"checkbox":case"radio":if(oField.checked){qs+=sFieldName+"="+encodeURIComponent(oField.value)+"&";}
break;}}}
return qs.substr(0,qs.length-1);};Sarissa.updateContentFromForm=function(oForm,oTargetElement,xsltproc,callback){try{Sarissa.updateCursor(oTargetElement,"wait");var params=Sarissa.formToQueryString(oForm)+"&"+Sarissa.REMOTE_CALL_FLAG+"=true";var xmlhttp=new XMLHttpRequest();var bUseGet=oForm.getAttribute("method")&&oForm.getAttribute("method").toLowerCase()=="get";if(bUseGet){xmlhttp.open("GET",oForm.getAttribute("action")+"?"+params,true);}
else{xmlhttp.open('POST',oForm.getAttribute("action"),true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.setRequestHeader("Content-length",params.length);xmlhttp.setRequestHeader("Connection","close");}
xmlhttp.onreadystatechange=function(){try{if(xmlhttp.readyState==4){var oDomDoc=xmlhttp.responseXML;if(oDomDoc&&Sarissa.getParseErrorText(oDomDoc)==Sarissa.PARSED_OK){Sarissa.updateContentFromNode(xmlhttp.responseXML,oTargetElement,xsltproc);if(callback){callback(oForm,oTargetElement);}}
else{throw Sarissa.getParseErrorText(oDomDoc);}}}
catch(e){if(callback){callback(oForm,oTargetElement,e);}
else{throw e;}}};xmlhttp.send(bUseGet?"":params);}
catch(e){Sarissa.updateCursor(oTargetElement,"auto");if(callback){callback(oForm,oTargetElement,e);}
else{throw e;}}
return false;};Sarissa.getFunctionName=function(oFunc){if(!oFunc||(typeof oFunc!='function')){throw"The value of parameter 'oFunc' must be a function";}
if(oFunc.name){return oFunc.name;}
var sFunc=oFunc.toString();alert("sFunc: "+sFunc);var name=sFunc.substring(sFunc.indexOf('function')+8,sFunc.indexOf('('));if(!name||name.length==0||name==" "){name="SarissaAnonymous"+Sarissa._getUniqueSuffix();window[name]=oFunc;}
return name;};Sarissa.setRemoteJsonCallback=function(url,callback,callbackParam){if(!callbackParam){callbackParam="callback";}
var callbackFunctionName=Sarissa.getFunctionName(callback);var id="sarissa_json_script_id_"+Sarissa._getUniqueSuffix();var oHead=document.getElementsByTagName("head")[0];var scriptTag=document.createElement('script');scriptTag.type='text/javascript';scriptTag.id=id;scriptTag.onload=function(){};if(url.indexOf("?")!=-1){url+=("&"+callbackParam+"="+callbackFunctionName);}
else{url+=("?"+callbackParam+"="+callbackFunctionName);}
scriptTag.src=url;oHead.appendChild(scriptTag);return id;};

//   EOF

// Global Variables
// var timeout = null;

// TODO - use sarissa for standard XMLHttpRequest Support.


// AJAX-JSF AJAX-like library, for communicate with view Tree on server side.

// Modified by Alexander J. Smirnov to use as JSF AJAX-like components. 

A4J.AJAX={},A4J.AJAX.VIEW_ROOT_ID="_viewRoot",A4J.AJAX.Stub=function(){},A4J.AJAX.isWebKit=-1!=navigator.userAgent.search(/( AppleWebKit\/)([^ ]+)/),A4J.AJAX.XMLHttpRequest=function(e){this._query=e,this._documentElement=window.document.documentElement},A4J.AJAX.XMLHttpRequest.prototype={_query:null,_timeout:0,_timeoutID:null,onready:null,_parsingStatus:Sarissa.PARSED_EMPTY,_errorMessage:"XML Response object not set",_contentType:null,_onerror:function(e,t){599!=t&&e.getResponseText()&&A4J.AJAX.replacePage(e)},onfinish:null,options:{},domEvt:null,form:null,_request:null,_aborted:!1,_documentElement:null,setRequestTimeout:function(e){this._timeout=e},send:function(){this._request=new XMLHttpRequest;var e=this;this._request.onreadystatechange=function(){if(window.document.documentElement!=e._documentElement)return LOG.warn("Page for current request have been unloaded - abort processing"),e._status_stopped||(A4J.AJAX.status(e.containerId,e.options.status,!1),e._status_stopped=!0),void e.abort();if(LOG.debug("Request state : "+e._request.readyState),4==e._request.readyState){if(e._aborted)return A4J.AJAX.status(e.containerId,e.options.status,!1),void A4J.AJAX.popQueue(e);LOG.debug("Request end with state 4"),e._timeoutID&&window.clearTimeout(e._timeoutID);var t,n;try{t=e._request.status,n=e._request.statusText}catch(r){LOG.error("request don't have status code - network problem, "+r.message),t=599,n="Network error"}if(200==t){try{LOG.debug("Response  with content-type: "+e.getResponseHeader("Content-Type")),LOG.debug("Full response content: ",e.getResponseText())}catch(r){}e._request.responseXML&&(e._parsingStatus=Sarissa.getParseErrorText(e._request.responseXML),e._parsingStatus==Sarissa.PARSED_OK&&Sarissa.setXpathNamespaces&&Sarissa.setXpathNamespaces(e._request.responseXML,"xmlns='http://www.w3.org/1999/xhtml'")),e.onready&&e.onready(e)}else e._errorMessage="Request error, status : "+t+" "+n,LOG.error(e._errorMessage),"function"==typeof e._onerror&&e._onerror(e,t,e._errorMessage),e.onfinish&&e.onfinish(e);e=void 0}};try{LOG.debug("Start XmlHttpRequest"),this._request.open("POST",this._query.getActionUrl(""),!0);var t="application/x-www-form-urlencoded; charset=UTF-8";this._request.setRequestHeader("Content-Type",t),this._request.setRequestHeader("Synchronized","true")}catch(n){LOG.debug("XmlHttpRequest not support setRequestHeader - use GET instead of POST"),this._request.open("GET",this._query.getActionUrl("")+"?"+this._query.getQueryString(),!0)}this._request.send(this._query.getQueryString()),this._timeout>0&&(this._timeoutID=window.setTimeout(function(){LOG.warn("request stopped due to timeout"),e._aborted||"function"==typeof A4J.AJAX.onAbort&&A4J.AJAX.onAbort(e),e._aborted=!0,e._request.onreadystatechange=A4J.AJAX.Stub,e._request.abort(),e._onerror&&(e._errorMessage="Request timeout",e._onerror(e,500,e._errorMessage)),e.onfinish&&e.onfinish(e),e._request=void 0,e=void 0},this._timeout))},abort:function(){this._oncomplete_aborted=!0,this._aborted||"function"==typeof A4J.AJAX.onAbort&&A4J.AJAX.onAbort(this),this._aborted=!0},getResponseText:function(){try{return this._request.responseText}catch(e){return null}},getError:function(){return this._errorMessage},getParserStatus:function(){return this._parsingStatus},getContentType:function(){if(!this._contentType){var e=this.getResponseHeader("Content-Type");if(e){var t=e.indexOf(";");this._contentType=t>=0?e.substring(0,t):e}else this._contentType="text/html"}return this._contentType},getResponseHeader:function(e){var t;try{t=this._request.getResponseHeader(e),""===t&&(t=void 0)}catch(n){}if(!t&&(LOG.debug("Header "+e+" not found, search in <meta>"),this._parsingStatus==Sarissa.PARSED_OK))for(var r=this.getElementsByTagName("meta"),o=0;o<r.length;o++){var i=r[o];if(LOG.debug("Find <meta name='"+i.getAttribute("name")+"' content='"+i.getAttribute("content")+"'>"),i.getAttribute("name")==e){t=i.getAttribute("content");break}}return t},getElementsByTagName:function(e,t){t||(t=this._request.responseXML),LOG.debug("search for elements by name '"+e+"'  in element "+t.nodeName);var n;try{n=t.selectNodes('.//*[local-name()="'+e+'"]')}catch(r){try{n=t.getElementsByTagName(e)}catch(o){LOG.debug("getElementsByTagName found no elements, "+o.Message)}}return n},getElementById:function(e){var t=this._request.responseXML;if(t){if("undefined"!=typeof t.getElementById)return LOG.debug("call getElementById for id= "+e),t.getElementById(e);if("undefined"!=typeof t.selectSingleNode)return LOG.debug("call selectSingleNode for id= "+e),t.selectSingleNode("//*[@id='"+e+"']");if("undefined"!=typeof t.nodeFromID)return LOG.debug("call nodeFromID for id= "+e),t.nodeFromID(e);LOG.error("No functions for getElementById found ")}else LOG.debug("No parsed XML document in response");return null},getJSON:function(e){var t,n=this.getElementById(e);if(n)try{t=Sarissa.getText(n,!0),t=window.eval("("+t+")")}catch(r){LOG.error("Error on parsing JSON data "+r.message,t)}return t},_evaluateScript:function(e){var t=!A4J.AJAX.isXhtmlScriptMode(),n=A4J.AJAX.getText(e,t);try{LOG.debug("Evaluate script replaced area in document: ",n),window.execScript?window.execScript(n):window.eval(n),LOG.debug("Script evaluation succeeded")}catch(r){LOG.error("ERROR Evaluate script:  Error name: "+r.name+r.message?". Error message: "+r.message:"")}},evaluateQueueScript:function(){var e=this.getElementById("org.ajax4jsf.queue_script");e&&this._evaluateScript(e)},evalScripts:function(e,t){var n=this.getElementsByTagName("script",e);if(LOG.debug("Scripts in updated part count : "+n.length),n.length>0){var r=this;window.setTimeout(function(){for(var e=0;e<n.length;e++)r._evaluateScript(n[e]);n=null,t&&r.doFinish(),r=void 0},0)}else t&&this.doFinish()},updatePagePart:function(e,t){var n=this.getElementById(e);if(!n)return LOG.error("New node for ID "+e+" is not present in response"),void(t&&this.doFinish());var r=window.document.getElementById(e);if(r){window.RichFaces&&window.RichFaces.Memory&&window.RichFaces.Memory.clean(r,!0);var o=r.parentNode;if(window.opera||A4J.AJAX.isWebkitBreakingAmps()||!r.outerHTML||r.tagName.match(/(tbody|thead|tfoot|tr|th|td)/i)){if(Sarissa.clearChildNodes(r),A4J.AJAX.isWebKit)try{n.normalize()}catch(i){LOG.error("Node normalization failed "+i.message)}var s=window.document.importNode(n,!0);LOG.debug("Replace content of node by replaceChild()");var u=null;A4J.AJAX.TestReplacedGetElementByIdVisibility(),A4J.AJAX._testReplacedGetElementByIdVisibility||(LOG.debug("Temporarily substituting document.getElementById() to work around WebKit issue"),u=document.getElementById,document.getElementById=function(e){var t=u.apply(document,arguments);if(!t){var e=arguments[0];LOG.debug("Element [@id='"+e+"'] was not found in document, trying to locate XPath match");try{var n=s.ownerDocument.evaluate("//*[@id='"+e+"']",s,null,XPathResult.ANY_UNORDERED_NODE_TYPE);n&&(t=n.singleNodeValue),LOG.debug("XPath located: "+t)}catch(r){LOG.error("Error locating [@id='"+e+"'] element: "+r.message)}}return t});try{o.replaceChild(s,r)}finally{u&&(LOG.debug("Restoring document.getElementById()"),document.getElementById=u)}}else{if(LOG.debug("Replace content of node by outerHTML()"),!Sarissa._SARISSA_IS_IE||"table"!=r.tagName.toLowerCase())try{r.innerHTML=""}catch(i){LOG.error("Error to clear node content by innerHTML "+i.message),Sarissa.clearChildNodes(r)}r.outerHTML=new XMLSerializer().serializeToString(n)}A4J.AJAX._scriptEvaluated||this.evalScripts(n,t),LOG.debug("Update part of page for Id: "+e+" successful")}else LOG.warn("Node for replace by response with id "+e+" not found in document"),!A4J.AJAX._scriptEvaluated&&t&&this.doFinish();A4J.AJAX._scriptEvaluated&&t&&this.doFinish()},doFinish:function(){this.onfinish&&this.onfinish(this)},appendNewHeadElements:function(e){var t=this._appendNewElements("script","src",null,null,["type","language","charset"]),n=this;if(t.concat(this._appendNewElements("link","href","class",["component","user"],["type","rev","media"],{"class":"className"},function(e,t){n._copyAttribute(e,t,"rel")})),0==t.length)return void e();A4J.AJAX.headElementsCounter=t.length;for(var r=function(){("loaded"==this.readyState||"complete"==this.readyState)&&(this.onreadystatechange=null,this.onload=null,e())},o=function(){this.onreadystatechange=null,this.onload=null,e()},i=0;i<t.length;i++)t[i].onreadystatechange=r,t[i].onload=o},_appendNewElements:function(e,t,n,r,o,i,s){var u=document.getElementsByTagName("head")[0]||document.documentElement,a=this.getElementsByTagName(e),d=document.getElementsByTagName(e),l=i&&i[n]||n,c=[],p={};if(r)for(var A=0,m=0;m<d.length;m++){for(var h=d[m],f=h[l];A<r.length&&r[A]!=f;A++)p[r[A]]=h;if(A==r.length)break}for(var A=0;A<a.length;A++){var g,J=a[A],v=J.getAttribute(t);if(r&&(g=J.getAttribute(n)),v){var y=!1;LOG.debug("<"+e+"> in response with src="+v);for(var m=0;m<d.length;m++)if(this._noSessionHref(v)==this._noSessionHref(d[m].getAttribute(t))){if(LOG.debug("Such element exist in document"),n){var w=d[m][l];(!g^!w||g&&w&&g!=w)&&LOG.warn("Roles are different")}y=!0;break}if(!y){var _=document.createElement(e);_.setAttribute(t,v);for(var m=0;m<o.length;m++)this._copyAttribute(J,_,o[m]);g&&(_[l]=g),LOG.debug("append element to document");for(var m=0;m<A4J.AJAX._headTransformers.length;m++)A4J.AJAX._headTransformers[m](_);var O=p[g];O&&O.parentNode?O.parentNode.insertBefore(_,O):u.appendChild(_),s&&s(J,_),("link"!=e||"text/javascript"==_.type.toLowerCase())&&c.push(_)}}}return c},_noSessionHref:function(e){var t=e;if(e){var n=e.lastIndexOf(";jsessionid=");if(n>0){t=e.substring(0,n);var r=e.lastIndexOf("?");r>n&&(t+=e.substring(r))}}return t},_copyAttribute:function(e,t,n){var r=e.getAttribute(n);r&&t.setAttribute(n,r)}},A4J.AJAX.Listener=function(e){this.onafterajax=e},A4J.AJAX.AjaxListener=function(e,t){this[e]=t},A4J.AJAX._listeners=[],A4J.AJAX.AddListener=function(e){A4J.AJAX._listeners.push(e)},A4J.AJAX.removeListeners=function(){A4J.AJAX._listeners=[]},A4J.AJAX.removeListener=function(e){for(var t=A4J.AJAX._listeners.length-1;t>=0;t--)A4J.AJAX._listeners[t]==e&&A4J.AJAX._listeners.splice(t,1)},A4J.AJAX.HeadElementTransformer=function(e){this.elt=e},A4J.AJAX._headTransformers=[],A4J.AJAX.AddHeadElementTransformer=function(e){A4J.AJAX._headTransformers.push(e)},A4J.AJAX.SetZeroRequestDelay=function(e){"undefined"==typeof e.requestDelay&&(e.requestDelay=0)},A4J.AJAX._pollers={},A4J.AJAX.Poll=function(e,t){A4J.AJAX.StopPoll(t.pollId),t.onerror||(t.onerror=function(n,r,o){"function"==typeof A4J.AJAX.onError&&A4J.AJAX.onError(n,r,o),A4J.AJAX.Poll(e,t)}),t.onqueuerequestdrop||(t.onqueuerequestdrop=function(){A4J.AJAX.Poll(e,t)}),A4J.AJAX.SetZeroRequestDelay(t),A4J.AJAX._pollers[t.pollId]=window.setTimeout(function(){A4J.AJAX._pollers[t.pollId]=void 0,"function"==typeof t.onsubmit&&0==t.onsubmit()?A4J.AJAX.Poll(e,t):A4J.AJAX.Submit(e,null,t)},t.pollinterval)},A4J.AJAX.StopPoll=function(e){A4J.AJAX._pollers[e]&&(window.clearTimeout(A4J.AJAX._pollers[e]),A4J.AJAX._pollers[e]=void 0)},A4J.AJAX.Push=function(e,t){A4J.AJAX.StopPush(t.pushId),t.onerror=function(){A4J.AJAX.Push(e,t)},t.onqueuerequestdrop=function(){LOG.debug("Push main request dropped from queue")},A4J.AJAX._pollers[t.pushId]=window.setTimeout(function(){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){try{200==n.status&&"READY"==n.getResponseHeader("Ajax-Push-Status")&&(A4J.AJAX.SetZeroRequestDelay(t),A4J.AJAX.Submit(e||t.dummyForm,null,t))}catch(r){}n=null,A4J.AJAX._pollers[t.pushId]=null,A4J.AJAX.Push(e,t)}},A4J.AJAX.SendPush(n,t)},t.pushinterval)},A4J.AJAX.SendPush=function(e,t){var n=t.pushUrl||t.actionUrl;e.open("HEAD",n,!0),e.setRequestHeader("Ajax-Push-Key",t.pushId),t.timeout&&e.setRequestHeader("Timeout",t.timeout),e.send(null)},A4J.AJAX.StopPush=function(e){A4J.AJAX._pollers[e]&&(window.clearTimeout(A4J.AJAX._pollers[e]),A4J.AJAX._pollers[e]=null)},A4J.AJAX.CloneObject=function(e,t){var n={};for(var r in e)t&&"function"==typeof evt[prop]||(n[r]=e[r]);return n},A4J.AJAX.SubmitForm=function(e,t){var n=A4J.AJAX.CloneObject(t);A4J._formInput&&(LOG.debug("Form submitted by button "+A4J._formInput.id),n.control=A4J._formInput,A4J._formInput=null,n.submitByForm=!0),A4J.AJAX.Submit(e,null,n)},A4J.AJAX.SubmiteventsQueue=function(e){e.submit()},A4J.AJAX.CloneEvent=function(e){var t;if(e=e||window.event||null){try{t=A4J.AJAX.CloneObject(e,!1)}catch(n){LOG.warn("Exception on clone event "+n.name+":"+n.message)}LOG.debug("Have Event "+t+" with properties: target: "+t.target+", srcElement: "+t.srcElement+", type: "+t.type)}return t},A4J.AJAX.PrepareQuery=function(e,t,n){for(var r=0;r<A4J.AJAX._listeners.length;r++){var o=A4J.AJAX._listeners[r];o.onbeforeajax&&o.onbeforeajax(e,t,n)}LOG.debug("Query preparation for form '"+e+"' requested");var i=window.document.getElementById(e);if((!i||"FORM"!=i.nodeName.toUpperCase())&&t){var s=t.target||t.srcElement||null;s&&(i=A4J.AJAX.locateForm(s))}if(!n.submitByForm&&i&&i.onsubmit&&(LOG.debug("Form have onsubmit function, call it"),0==i.onsubmit()))return!1;var u=new A4J.Query(n.containerId,i);return u.appendFormControls(n.single,n.control),n.parameters&&u.appendParameters(n.parameters),n.actionUrl&&u.setActionUrl(n.actionUrl),u},A4J.AJAX.SubmitQuery=function(e,t,n){var r=new A4J.AJAX.XMLHttpRequest(e),o=e._form,i=e._containerId;r.options=t,r.containerId=i,r.domEvt=n,r.form=o,t.timeout&&r.setRequestTimeout(t.timeout),r.onready=A4J.AJAX.processResponse,t.onerror?r._onerror=t.onerror:"function"==typeof A4J.AJAX.onError&&(r._onerror=A4J.AJAX.onError);var s=t.queueonerror;if(s){var u=r._onerror;r._onerror=u?function(){s.apply(this,arguments),u.apply(this,arguments)}:s}return r.onfinish=A4J.AJAX.finishRequest,LOG.debug("NEW AJAX REQUEST !!! with form: "+(o?(o.id||o.name||o):"")),A4J.AJAX.status(i,t.status,!0),r.send(),r},A4J.AJAX.Submit=function(e,t,n){var r=A4J.AJAX.CloneEvent(t),o=A4J.AJAX.PrepareQuery(e,r,n);if(o){var i=A4J.AJAX.EventQueue.getOrCreateQueue(n,e);i?i.push(o,n,r):A4J.AJAX.SubmitQuery(o,n,r)}return!1},A4J.AJAX.SubmitRequest=function(e,t,n){var r=A4J.AJAX.CloneEvent(t),o=A4J.AJAX.PrepareQuery(e,r,n);return o&&A4J.AJAX.SubmitQuery(o,n,r),!1},A4J.AJAX.processResponseAfterUpdateHeadElements=function(e,t){e.evaluateQueueScript();for(var n=0;n<t.length;n++){var r=t[n];LOG.debug("Update page part from call parameter for ID "+r),e.updatePagePart(r,n==t.length-1)}},A4J.AJAX.headElementsCounter=0,A4J.AJAX.processResponse=function(e){A4J.AJAX.TestScriptEvaluation();var t=e.options,n=e.getResponseHeader("Ajax-Response"),r=e.getResponseHeader("Ajax-Expired");if(r&&"function"==typeof A4J.AJAX.onExpired){var o=A4J.AJAX.onExpired(window.location,r);if(o)return void(window.location=o)}if("true"!=n){LOG.warn("No ajax response header ");var o=e.getResponseHeader("Location");try{"redirect"==n&&o?window.location=o:"reload"==n?window.location.reload(!0):A4J.AJAX.replacePage(e)}catch(i){LOG.error("Error redirect to new location ")}}else if(e.getParserStatus()==Sarissa.PARSED_OK){if(t.onbeforedomupdate||t.queueonbeforedomupdate){var s=e.domEvt,u=e.getJSON("_ajax:data");LOG.debug("Call local onbeforedomupdate function before replacing elemements"),t.onbeforedomupdate&&t.onbeforedomupdate(e,s,u),t.queueonbeforedomupdate&&t.queueonbeforedomupdate(e,s,u)}var a,d=e.getResponseHeader("Ajax-Update-Ids"),l=function(){0!=A4J.AJAX.headElementsCounter&&(LOG.debug("Script "+A4J.AJAX.headElementsCounter+" was loaded"),--A4J.AJAX.headElementsCounter),0==A4J.AJAX.headElementsCounter&&A4J.AJAX.processResponseAfterUpdateHeadElements(e,a)};t.affected?(a=t.affected,e.appendNewHeadElements(l)):d&&""!=d?(LOG.debug("Update page by list of rendered areas from response "+d),a=d.split(","),e.appendNewHeadElements(l)):(LOG.warn("No information in response about elements to replace"),e.doFinish());var c=e.getElementById("ajax-view-state");if(LOG.debug("Hidden JSF state fields: "),null!=c){var p=t.parameters["org.ajax4jsf.portlet.NAMESPACE"];LOG.debug("Namespace for hidden view-state input fields is "+p);var A=p?window.document.getElementById(p):window.document,m=A.getElementsByTagName("input");try{var h=e.getElementsByTagName("input",c);A4J.AJAX.replaceViewState(m,h)}catch(i){LOG.warn("No elements 'input' in response")}try{var h=e.getElementsByTagName("INPUT",c);A4J.AJAX.replaceViewState(m,h)}catch(i){LOG.warn("No elements 'INPUT' in response")}}for(var f=0;f<A4J.AJAX._listeners.length;f++){var g=A4J.AJAX._listeners[f];if(g.onafterajax){var u=e.getJSON("_ajax:data");g.onafterajax(e,e.domEvt,u)}}var J=e.getJSON("_A4J.AJAX.focus");if(J){LOG.debug("focus must be set to control "+J);var v=!1;e.form&&(v=e.form.elements[J]),v||(LOG.debug("No control element "+J+" in submitted form"),v=document.getElementById(J)),v?(LOG.debug("Set focus to control "),v.focus(),v.select&&v.select()):LOG.warn("Element for set focus not found")}else LOG.debug("No focus information in response")}else LOG.error("Error parsing XML"),LOG.error("Parse Error: "+e.getParserStatus())},A4J.AJAX.replacePage=function(e){if(!e.getResponseText())return void LOG.warn("No content in response for replace current page");LOG.debug("replace all page content with response");var t=Sarissa._SARISSA_IS_IE,n=window.document.open;t&&(LOG.debug("setup custom document.open method"),window.document.open=function(e,t,r,o){n(e,t,r,o)}),window.setTimeout(function(){var r=!1;try{var o=e.getContentType(),i=t?e.getResponseText().replace(/(<script(?!\s+src=))/gim,"$1 defer "):e.getResponseText();window.document.open(o,"replace"),window.LOG&&LOG.debug("window.document has opened for writing"),r=!0,window.document.write(i),window.LOG&&LOG.debug("window.document has been writed"),window.document.close(),window.LOG&&LOG.debug("window.document has been closed for writing"),t&&window.location.reload(!1)}catch(s){window.LOG&&LOG.debug("exception during write page content "+s.Message),r&&window.document.close();var u=(new DOMParser).parseFromString(e.getResponseText(),"text/xml");if(Sarissa.getParseErrorText(u)==Sarissa.PARSED_OK){window.LOG&&LOG.debug("response has parsed as DOM documnet."),Sarissa.clearChildNodes(window.document.documentElement);for(var a=u.documentElement.childNodes,d=0;d<a.length;d++)if(1==a[d].nodeType){window.LOG&&LOG.debug("append new node in document");var l=window.document.importNode(a[d],!0);window.document.documentElement.appendChild(l)}}else window.LOG&&LOG.error("Error parsing response",Sarissa.getParseErrorText(u))}finally{window.document.open=n}window.LOG&&LOG.debug("page content has been replaced")},0)},A4J.AJAX.replaceViewState=function(e,t){if(LOG.debug("Replace value for inputs: "+e.length+" by new values: "+t.length),t.length>0&&e.length>0)for(var n=0;n<t.length;n++){var r=t[n];LOG.debug("Input in response: "+r.getAttribute("name"));for(var o=0;o<e.length;o++){var i=e[o];i.name==r.getAttribute("name")&&(LOG.debug("Found same input on page with type: "+i.type),i.setAttribute("autocomplete","off"),i.value=r.getAttribute("value"))}}},A4J.AJAX.finishRequest=function(e){var t=e.options;if(e._oncomplete_aborted)LOG.debug("Aborted request, won't call oncomplete at all"),setTimeout(function(){A4J.AJAX.status(e.containerId,t.status,!1)},0);else{var n;try{n=e.getElementById("org.ajax4jsf.oncomplete")}catch(r){LOG.warn("Error reading oncomplete from request "+r.message)}n?(LOG.debug("Call request oncomplete function after processing updates"),window.setTimeout(function(){var r,o=e.domEvt;try{r=e.getJSON("_ajax:data")}catch(i){LOG.warn("Error reading data from request "+i.message)}try{var s=null;o&&(s=o.target?o.target:o.srcElement);var u=Sarissa.getText(n,!0),a=new Function("request","event","data",u);a.call(s,e,o,r),t.queueoncomplete&&t.queueoncomplete.call(s,e,o,r)}catch(i){LOG.error("Error evaluate oncomplete function "+i.Message)}A4J.AJAX.status(e.containerId,t.status,!1)},0)):t.oncomplete||t.queueoncomplete?(LOG.debug("Call local oncomplete function after processing updates"),window.setTimeout(function(){var n,r=e.domEvt;try{n=e.getJSON("_ajax:data")}catch(o){LOG.warn("Error reading data from request "+o.message)}t.oncomplete&&t.oncomplete(e,r,n),t.queueoncomplete&&t.queueoncomplete(e,r,n),A4J.AJAX.status(e.containerId,t.status,!1)},0)):(LOG.debug("Processing updates finished, no oncomplete function to call"),setTimeout(function(){A4J.AJAX.status(e.containerId,t.status,!1)},0))}A4J.AJAX.popQueue(e)},A4J.AJAX.popQueue=function(e){e.shouldNotifyQueue&&e.queue&&e.queue.pop()},A4J.AJAX.getCursorPos=function(e){if(null!=e.selectionEnd)return e.selectionEnd;var t=document.selection.createRange(),n=0==t.compareEndPoints("StartToEnd",t);n||t.collapse(!1);var r=t.getBookmark();return r.charCodeAt(2)-2},A4J.AJAX.locateForm=function(e){for(var t=e;t&&"form"!=t.nodeName.toLowerCase();)t=t.parentNode;return t},A4J.AJAX.getElementById=function(e,t){var n,r=t["org.ajax4jsf.portlet.NAMESPACE"],o=r?window.document.getElementById(r):window.document;return o?n=o.getElementById(e):LOG.error("No root element for portlet namespace "+r+" on page"),n},A4J.AJAX._requestsCounts={},A4J.AJAX.status=function(e,t,n){try{t=t||e+":status",A4J.AJAX._requestsCounts[t]=(A4J.AJAX._requestsCounts[t]||0)+(n?1:-1);var r=document.getElementById(t+".start"),o=document.getElementById(t+".stop");A4J.AJAX._requestsCounts[t]>0?(o&&(o.style.display="none"),r&&(r.style.display="")):(r&&(r.style.display="none"),o&&(o.style.display="")),n?r&&"function"==typeof r.onstart&&r.onstart():o&&"function"==typeof o.onstop&&o.onstop()}catch(i){LOG.error("Exception on status change: ")}},A4J.Query=function(e,t){var n=e||A4J.AJAX.VIEW_ROOT_ID;this._query={AJAXREQUEST:n},this._oldSubmit=null,this._form=t,this._containerId=n,this._actionUrl=(this._form && this._form.action)?this._form.action:this._form},A4J.Query.prototype={_form:null,_actionUrl:null,_ext:"",_query:{},_oldSubmit:null,_pageBase:window.location.protocol+"//"+window.location.host,hidden:function(e){this._value_query(e),e.name.length>4&&e.name.lastIndexOf("_idcl")==e.name.length-5?e.value="":e.name.length>12&&e.name.lastIndexOf("_link_hidden_")==e.name.length-13&&(e.value="")},text:function(e){this._value_query(e)},textarea:function(e){this._value_query(e)},"select-one":function(e){-1!=e.selectedIndex&&this._value_query(e)},password:function(e){this._value_query(e)},file:function(e){this._value_query(e)},radio:function(e){this._radio_query(e)},checkbox:function(e){this._check_query(e)},"select-multiple":function(e){for(var t=e.name,n=e.options,r=0;r<e.length;r++){var o=n[r];this._addOption(t,o)}},_addOption:function(e,t){t.selected&&(this._query[e]||(this._query[e]=[]),this._query[e][this._query[e].length]=t.value)},image:function(e,t){t&&this._value_query(e)},button:function(e,t){t&&this._value_query(e)},submit:function(e,t){t&&this._value_query(e)},link:function(e,t){t&&(this._value_query(e),e.parameters&&this.appendParameters(e.parameters))},input:function(e,t){t&&(this.link(e,t),e.control&&this.appendControl(e.control,t))},appendControl:function(e,t){this[e.type]?this[e.type](e,t):this._appendById(e.id||e)},appendFormControls:function(e,t){try{var n=this._form.elements;if(n){var r=0;for(r=0;r<n.length;r++){var o=n[r];if(o!=t)try{e&&"hidden"!=o.type||this.appendControl(o,!1)}catch(i){LOG.error("exception in building query ( append form control ) "+i)}}}}catch(s){LOG.warn("Error with append form controls to query "+s)}t&&this.appendControl(t,!0)},appendParameters:function(e){for(k in e)"undefined"==typeof Object.prototype[k]&&(LOG.debug("parameter "+k+" with value "+e[k]),this.appendParameter(k,e[k]))},setActionUrl:function(e){this._actionUrl=e},getActionUrl:function(e){var t=this._actionUrl,n=t.indexOf("?");return"/"==t.substring(0,1)&&(t=this._pageBase+t),e||(e=this._ext),n>=0?t.substring(0,n)+e+t.substring(n):t+e},getQueryString:function(){var e,t,n="",r=[];for(var o in this._query)if("undefined"==typeof Object.prototype[o])if(e=this._query[o],t=this._encode(o),e instanceof Object)for(var i=0;i<e.length;i++)r.push(t),r.push("="),r.push(this._encode(e[i])),r.push("&");else r.push(t),r.push("="),r.push(this._encode(e)),r.push("&");return n=r.join(""),LOG.debug("QueryString: "+n),n},_appendById:function(e){this.appendParameter(this._form.id+"_link_hidden_",e)},_value_query:function(e){e.name?(LOG.debug("Append "+e.type+" control "+e.name+" with value ["+e.value+"] and value attribute ["+e.getAttribute("value")+"]"),null!=e.value&&this.appendParameter(e.name,e.value)):LOG.debug("Ignored "+e.type+" no-name control with value ["+e.value+"] and value attribute ["+e.getAttribute("value")+"]")},_check_query:function(e){e.checked&&this.appendParameter(e.name,e.value?e.value:"on")},_radio_query:function(e){e.checked&&this.appendParameter(e.name,e.value?e.value:"")},appendParameter:function(e,t){return this._query[e]?(this._query[e]instanceof Object||(this._query[e]=[this._query[e]]),void(this._query[e][this._query[e].length]=t)):void(this._query[e]=t)},_encode:function(e){try{return encodeURIComponent(e)}catch(t){var n=escape(e);return n.split("+").join("%2B")}}},A4J.AJAX.getText=function(e,t){for(var n="",r=e.childNodes,o=0;o<r.length;o++){var i=r[o],s=i.nodeType;s==Node.TEXT_NODE||s==Node.CDATA_SECTION_NODE||t&&s==Node.COMMENT_NODE?n+=i.data:(s==Node.ELEMENT_NODE||s==Node.DOCUMENT_NODE||s==Node.DOCUMENT_FRAGMENT_NODE)&&(n+=arguments.callee(i,t))}return n},A4J.AJAX.isWebkitBreakingAmps=function(){if(!this._webkitBreakingAmps){var e=document.createElement("div");e.innerHTML="<a href='#a=a&#38;b=b'>link</a>";var t=e.firstChild;this._webkitBreakingAmps=t&&t.getAttribute&&/&#38;b=b$/.test(t.getAttribute("href"))?2:1}return this._webkitBreakingAmps>1},A4J.AJAX.isXhtmlScriptMode=function(){if(!this._xhtmlScriptMode){var e=document.createElement("div");e.innerHTML="<script type='text/javascript'><!--\r\n/**/\r\n//--></script>";for(var t=!1,n=e.firstChild;n;){if(n.nodeType==Node.ELEMENT_NODE){for(var r=n.firstChild;r;){if(r.nodeType==Node.COMMENT_NODE){t=!0;break}r=r.nextSibling}break}n=n.nextSibling}this._xhtmlScriptMode=t?2:1}return this._xhtmlScriptMode>1},A4J.AJAX._scriptEvaluated=!1,A4J.AJAX.TestScriptEvaluation=function(){if((!document.all||window.opera)&&!A4J.AJAX._scriptTested)try{var e=Sarissa.getDomDocument(),t=document.createElement("span");document.body.appendChild(t);var n="<html xmlns='http://www.w3.org/1999/xhtml'><script>A4J.AJAX._scriptEvaluated=true;</script></html>";e=(new DOMParser).parseFromString(n,"text/xml");var r=e.getElementsByTagName("script")[0];if(window.opera||A4J.AJAX.isWebkitBreakingAmps()||!t.outerHTML){var o;o=window.document.importNode(r,!0),document.body.replaceChild(o,t)}else t.outerHTML=new XMLSerializer().serializeToString(r)}catch(i){}A4J.AJAX._scriptTested=!0},A4J.AJAX.TestReplacedGetElementByIdVisibility=function(){if(!A4J.AJAX._replacedGetElementByIdVisibilityTested&&(A4J.AJAX._replacedGetElementByIdVisibilityTested=!0,A4J.AJAX._testReplacedGetElementByIdVisibility=!0,A4J.AJAX.TestScriptEvaluation(),A4J.AJAX._scriptEvaluated))try{var e=document.createElement("span");document.body.appendChild(e);var t="<html xmlns='http://www.w3.org/1999/xhtml'><span id='_A4J_AJAX_TestReplacedGetElementByIdVisibility'><script>A4J.AJAX._testReplacedGetElementByIdVisibility = !!(document.getElementById('_A4J_AJAX_TestReplacedGetElementByIdVisibility'));</script></span></html>";oDomDoc=(new DOMParser).parseFromString(t,"text/xml");var n,r=oDomDoc.getElementsByTagName("span")[0];n=window.document.importNode(r,!0),document.body.replaceChild(n,e),document.body.removeChild(n)}catch(o){LOG.error("Error testing replaced elements getElementById() visibility: "+o.message)}},A4J.AJAX._eventQueues={},A4J.AJAX.EventQueue=function(){var e="dropNew",t="dropNext",n="fireNew",r="fireNext",o=function(e,t){for(var n in t)e[n]=t[n]},i=function(e){var t={};for(var n in e)t[n]=e[n];for(var n in this.requestOptions)"undefined"==typeof t[n]&&(t[n]=this.requestOptions[n]);return t},s=function(){var e=function(e,t,n,r){this.queue=e,this.query=t,this.options=n,this.event=r,this.similarityGroupingId=this.options.similarityGroupingId,this.eventsCount=1};return o(e.prototype,{isIgnoreDupResponses:function(){return this.options.ignoreDupResponses},getSimilarityGroupingId:function(){return this.similarityGroupingId},setSimilarityGroupingId:function(e){this.similarityGroupingId=e},submit:function(){this.query.appendParameter("AJAX:EVENTS_COUNT",this.eventsCount),this.request=A4J.AJAX.SubmitQuery(this.query,this.options,this.event);var e=this.queue;return this.request.queue=e,this.request},abort:function(){this.request&&!this.aborted&&(this.aborted=!0,this.request.abort())},ondrop:function(){var e=this.options.onqueuerequestdrop;e&&e.call(this.queue,this.query,this.options,this.event)},onRequestDelayPassed:function(){this.readyToSubmit=!0,this.queue.submitFirst()},startTimer:function(){var e=this.options.requestDelay;if(LOG.debug("Queue will wait "+(e||0)+"ms before submit"),e){var t=this;this.timer=setTimeout(function(){try{t.onRequestDelayPassed()}finally{t.timer=void 0,t=void 0}},e)}else this.onRequestDelayPassed()},stopTimer:function(){this.timer&&(clearTimeout(this.timer),this.timer=void 0)},clearEntry:function(){this.stopTimer(),this.request&&(this.request.shouldNotifyQueue=!1,this.request=void 0)},getEventsCount:function(){return this.eventsCount},setEventsCount:function(e){this.eventsCount=e},getEventArguments:function(){return[this.query,this.options,this.event]}}),e}(),u=function(e,t,n){this.items=new Array,this.name=e,this.queueOptions=t||{},this.requestOptions=n||{}};return o(u.prototype,{submitFirst:function(){var e=this.items[0];if(e){if(!e.request)if(e.readyToSubmit){LOG.debug("Queue '"+this.name+"' will submit request NOW");var t=e.submit();t.shouldNotifyQueue=!0,this.requestOptions.queueonsubmit&&this.requestOptions.queueonsubmit.call(this,t)}else LOG.debug("First item is not ready to be submitted yet")}else LOG.debug("Queue is empty now")},getSize:function(){return this.items.length},getMaximumSize:function(){return this.queueOptions.size},isFull:function(){return this.getSize()==this.getMaximumSize()},getSizeExceededBehavior:function(){var e=this.queueOptions.sizeExceededBehavior;return e||(e=t),e},queue:function(e){this.items.push(e),this.queueOptions.onrequestqueue&&(LOG.debug("Call onrequestqueue handler"),this.queueOptions.onrequestqueue.apply(this,e.getEventArguments()))},dequeue:function(){var e=this.items.shift();this.queueOptions.onrequestdequeue&&(LOG.debug("Call onrequestdequeue handler"),this.queueOptions.onrequestdequeue.apply(this,e.getEventArguments()))},push:function(o,u,a){var d=i.call(this,u),l=new s(this,o,d,a),c=l.getSimilarityGroupingId(),p=this.items.length-1,A=this.items[p],m=!1;if(A&&(A.getSimilarityGroupingId()==c?(LOG.debug("Similar request currently in queue '"+this.name+"'"),A.request?(LOG.debug("Request has already beeen sent to server"),l.isIgnoreDupResponses()&&(LOG.debug("Duplicate responses ignore requested"),this.isFull()?LOG.debug("Queue is full, cannot set to ignore response for the current request"):(A.abort(),LOG.debug("Response for the current request will be ignored")))):(LOG.debug("Combine similar requests and reset timer"),m=!0,A.stopTimer(),l.setEventsCount(A.getEventsCount()+1),this.items[p]=l,l.startTimer())):(LOG.debug("Last queue entry is not the last anymore. Stopping requestDelay timer and marking entry as ready for submission"),A.stopTimer(),A.setSimilarityGroupingId(void 0),A.readyToSubmit=!0)),!m){if(this.isFull()){LOG.debug("Queue '"+this.name+"' is currently full");for(var h=this.getSizeExceededBehavior(),f=0;this.items[f]&&this.items[f].request;)f++;if(this.queueOptions.onsizeexceeded&&this.queueOptions.onsizeexceeded.apply(this,l.getEventArguments()),h==e)LOG.debug("Queue '"+this.name+"' is going to drop new item"),l.ondrop(),m=!0;else if(h==t){LOG.debug("Queue '"+this.name+"' is going to drop ["+f+"] item that is the next one");var g=this.items.splice(f,1)[0];g?(LOG.debug("Item dropped from queue"),g.stopTimer(),g.ondrop()):(LOG.debug("There's no such item, will handle new request instead"),l.ondrop(),m=!0)
}else if(h==n)LOG.debug("Queue '"+this.name+"' will submit new request"),l.submit(),m=!0;else if(h==r){LOG.debug("Queue '"+this.name+"' is going to drop and fire immediately ["+f+"] item that is the next one");var g=this.items.splice(f,1)[0];g?(LOG.debug("Item dropped from queue"),g.stopTimer(),g.submit()):(LOG.debug("There's no such item, will handle new request instead"),l.submit(),m=!0)}}this.submitFirst()}m||(this.queue(l),LOG.debug("New request added to queue '"+this.name+"'. Queue similarityGroupingId changed to "+c),l.startTimer())},pop:function(){LOG.debug("After request: queue '"+this.name+"'"),this.dequeue(),LOG.debug("There are "+this.items.length+" requests more in this queue"),this.submitFirst()},clear:function(){for(var e=this.items.length,t=0;t<this.items.length;t++)this.items[t].clearEntry();this.items.splice(0,e)}}),u}(),A4J.AJAX.EventQueue.DEFAULT_QUEUE_NAME="org.richfaces.queue.global",A4J.AJAX.EventQueue.getQueue=function(e){return A4J.AJAX._eventQueues[e]},A4J.AJAX.EventQueue.getQueues=function(){return A4J.AJAX._eventQueues},A4J.AJAX.EventQueue.addQueue=function(e){var t=e.name;if(A4J.AJAX._eventQueues[t])throw"Queue already registered";LOG.debug("Adding queue '"+t+"' to queues registry"),A4J.AJAX._eventQueues[t]=e},A4J.AJAX.EventQueue.removeQueue=function(e){var t=A4J.AJAX._eventQueues[e];t&&t.clear(),delete A4J.AJAX._eventQueues[e]},A4J.AJAX.EventQueue.getOrCreateQueue=function(){var e=function(e,t){return t?t+":"+e:e},t=function(e,t){return t?t+e:e};return function(n,r){var o,i,s,u=n.eventsQueue,a=n.namespace;u?(LOG.debug("Look up queue with name '"+u+"'"),o=e(u,r),i=t(u,a),s=i):(LOG.debug("Look up queue with default name"),o=r,i=t(A4J.AJAX.EventQueue.DEFAULT_QUEUE_NAME,a),s=n.implicitEventsQueue);var d=A4J.AJAX._eventQueues[o];return d?LOG.debug("Found form queue '"+o+"'"):(d=A4J.AJAX._eventQueues[i],d?LOG.debug("Found view queue '"+i+"'"):s&&(d=A4J.AJAX._eventQueues[s],d?LOG.debug("Found transient queue '"+s+"'"):(LOG.debug("Creating new transient queue '"+s+"' with default settings"),d=new A4J.AJAX.EventQueue(s),d._transient=!0,A4J.AJAX.EventQueue.addQueue(d)))),d}}(),function(){var e=function(){var e=A4J.AJAX.EventQueue.getQueues();for(var t in e){var n=e[t];n.clear()}};window.addEventListener?window.addEventListener("unload",e,!1):window.attachEvent("onunload",e)}(),window.LOG||(window.LOG={}),LOG.Level=function(e,t,n){this.name=e,this.priority=t,n&&(this.color=n)},LOG.OFF=new LOG.Level("off",1e3),LOG.FATAL=new LOG.Level("fatal",900,"red"),LOG.ERROR=new LOG.Level("error",800,"red"),LOG.WARN=new LOG.Level("warn",500,"yellow"),LOG.INFO=new LOG.Level("info",400,"blue"),LOG.DEBUG=new LOG.Level("debug",300,"darkblue"),LOG.ALL=new LOG.Level("all",100),LOG.A4J_DEBUG=new LOG.Level("a4j_debug",0,"green"),LOG.LEVEL=LOG.OFF,LOG._window=null,LOG.transmitToServer=!0,LOG.consoleDivId="logConsole",LOG.styles={a4j_debug:"green",debug:"darkblue",info:"blue",warn:"yellow",error:"red",fatal:"red"},LOG.a4j_debug=function(e,t){LOG._log(e,LOG.A4J_DEBUG,t)},LOG.debug=function(e,t){LOG._log(e,LOG.DEBUG,t)},LOG.info=function(e,t){LOG._log(e,LOG.INFO,t)},LOG.warn=function(e,t){LOG._log(e,LOG.WARN,t)},LOG.error=function(e,t){LOG._log(e,LOG.ERROR,t)},LOG.fatal=function(e,t){LOG._log(e,LOG.FATAL,t)},LOG.registerPopup=function(e,t,n,r,o){LOG._onkeydown||(LOG._onkeydown=document.onkeydown);var i=e.toUpperCase();document.onkeydown=function(e){window.event&&(e=window.event),String.fromCharCode(e.keyCode)==i&e.shiftKey&e.ctrlKey?(LOG.LEVEL=o,LOG.openWindow(t,"width="+n+",height="+r+",toolbar=no,scrollbars=yes,location=no,statusbar=no,menubar=no,resizable=yes,left = "+(screen.width-n)/2+",top ="+(screen.height-r)/2)):LOG._onkeydown&&LOG._onkeydown(e)}},LOG.clear=function(){consoleDiv=LOG._window&&LOG._window.document?LOG._window.document.body:window.document.getElementById(LOG.consoleDivId),consoleDiv.innerHTML='<button onclick="LOG.clear()">Clear</button><br />'},LOG.openWindow=function(e,t){if(LOG._window)LOG._window.focus();else{LOG._window=window.open("",e,t),LOG._window.LOG=LOG,LOG.clear();var n=LOG;LOG._window.onunload=function(){n._window.LOG=null,n._window=null,n.LEVEL=n.OFF,n=void 0}}},LOG._log=function(e,t,n){t.priority>=LOG.LEVEL.priority&&(LOG._logToConsole(e,t,n),LOG.transmitToServer&&LOG._logToServer(e,t))},LOG._time=function(){var e=new Date,t=e.getHours(),n=e.getMinutes();10>n&&(n="0"+n);var r=e.getSeconds();10>r&&(r="0"+r);var o=e.getTime()%1e3;return 100>o&&(o="0"+o),10>o&&(o="0"+o),t+":"+n+":"+r+","+o},LOG._logToConsole=function(e,t,n){var r,o;if(LOG._window&&LOG._window.document?(o=LOG._window.document,r=LOG._window.document.body):(o=window.document,r=window.document.getElementById(LOG.consoleDivId)),r){var i=o.createElement("span");i.style.color=t.color,i.appendChild(o.createTextNode(t.name+"["+LOG._time()+"]: "));var s=o.createElement("div"),u=o.createTextNode(e);if(s.appendChild(i),s.appendChild(u),n){var a=o.createElement("span");u=o.createTextNode(n),a.appendChild(u),s.appendChild(a)}r.appendChild(s)}},LOG._logToServer=function(e,t){t.name.substring(0,1)+e},LOG._requestCallBack=function(){},window.RichFaces||(window.RichFaces={}),window.RichFaces.Memory||(window.RichFaces.Memory={nodeCleaners:{},componentCleaners:{},addCleaner:function(e,t){this.nodeCleaners[e]=t},addComponentCleaner:function(e,t,n){this.componentCleaners[e]={cleaner:t,checker:n}},applyCleaners:function(e,t,n){for(var r in this.nodeCleaners)this.nodeCleaners[r](e,t);for(var r in this.componentCleaners)this.componentCleaners[r].checker(e,t)&&n.push(e)},_clean:function(e,t,n){if(e){this.applyCleaners(e,t,n);var r=e.all;if(r)for(var o=0,i=r.length,o=0;i>o;o++)this.applyCleaners(r[o],t,n);else for(var s=e.firstChild;s;)this._clean(s,t,n),s=s.nextSibling}},_cleanComponentNodes:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];for(var o in this.componentCleaners)this.componentCleaners[o].cleaner(r,t)}},clean:function(e,t){var n=[];this._clean(e,t,n),this._cleanComponentNodes(n,t),n=null}},window.RichFaces.Memory.addComponentCleaner("richfaces",function(e,t){var n=e.component;if(n){var r=n["rich:destructor"];if(r){var o=n[r];o&&o.call(n,t)}}},function(e){return e.component&&e.component["rich:destructor"]}),window.attachEvent&&window.attachEvent("onunload",function(){var e=window.RichFaces.Memory;e.clean(document),e.clean(window)}));

//
